<div class="mask d-flex align-items-center mt-3">
    <div class="container">
        <div class="row d-flex justify-content-center align-items-center">
            <div class="col-12">
                <div class="card shadow-lg">
                    <div class="card-body p-5">
                        <div class="row d-flex justify-content-center align-items-center">
                            <div class="col-12">
                                <h3>Alle leden</h3>
                                <table mat-table [dataSource]="participants" class="mat-elevation-z8">
                                    <!-- Picture (Initials) -->
                                    <ng-container matColumnDef="picture">
                                        <th mat-header-cell *matHeaderCellDef></th>
                                        <td mat-cell *matCellDef="let participant"><span class="userPic">{{
                                                participant.initials
                                                }}</span></td>
                                    </ng-container>
                                    <!-- Fullname -->
                                    <ng-container matColumnDef="name">
                                        <th mat-header-cell *matHeaderCellDef> Naam </th>
                                        <td mat-cell *matCellDef="let participant"> {{ participant.firstname }} {{
                                            participant.lastname
                                            }} </td>
                                    </ng-container>
                                    <!-- Emailaddress -->
                                    <ng-container matColumnDef="emailAddress">
                                        <th mat-header-cell *matHeaderCellDef> E-mailadres </th>
                                        <td mat-cell *matCellDef="let participant"> {{ participant.emailAddress }} </td>
                                    </ng-container>
                                    <!-- Created at -->
                                    <ng-container matColumnDef="createdAt">
                                        <th mat-header-cell *matHeaderCellDef> Lid sinds </th>
                                        <td mat-cell *matCellDef="let participant"> {{ (participant.createdAt | date:
                                            'short')
                                            || '-' }}
                                        </td>
                                    </ng-container>
                                    <!-- Last login -->
                                    <ng-container matColumnDef="lastLogin">
                                        <th mat-header-cell *matHeaderCellDef> Laatste login </th>
                                        <td mat-cell *matCellDef="let participant"> {{ (participant.lastLoginTimestamp |
                                            date:
                                            'short')
                                            || '-' }} </td>
                                    </ng-container>
                                    <!-- Status -->
                                    <ng-container matColumnDef="status">
                                        <th mat-header-cell *matHeaderCellDef></th>
                                        <td mat-cell *matCellDef="let participant"><button
                                                class="btn">Deactiveer</button>
                                        </td>
                                    </ng-container>
                                    <!-- Headers -->
                                    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="p-3"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>

                            </div>
                        </div>
                        <div class="row d-flex justify-content-center align-items-center mt-5">
                            <div class="col-12">
                                <!-- Tags -->
                                <h3>Alle tags</h3>

                                <div class="tag-container">
                                    <table mat-table [dataSource]="tags" class="mat-elevation-z8" id="table-tags">
                                        <!-- Tags -->
                                        <ng-container matColumnDef="tag">
                                            <th mat-header-cell *matHeaderCellDef> Tags </th>
                                            <td mat-cell *matCellDef="let tag">{{tag.name}}</td>
                                        </ng-container>
                                    <!-- Edit/delete -->
                                    <ng-container matColumnDef="change">
                                        <th mat-header-cell *matHeaderCellDef></th>
                                        <td mat-cell *matCellDef="let tag">
                                            <button class="btn" (click)="editModal(contentEdit,tag._id,tag.name)"><i class="bi bi-pencil"></i></button>
                                            <button class="btn" (click)="deleteModal(contentDelete,tag._id,tag.name)" disabled><i class="bi bi-trash3"></i></button>  </td>
                                        </ng-container>
                                        
                                        <!-- Headers -->
                                        <tr mat-header-row *matHeaderRowDef="displayedColumnsTag" class="p-3"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumnsTag;"></tr>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #contentEdit let-modal>
<div class="modal-header">
  <h4 class="modal-title" id="modal-tag-edit">Aanpassen</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="modal-body">
    <input #editedTag
        type="text"
        id="editedTag"
        name="editedTag"
        value="{{editTagName}}"
    >
</div>
<div class="modal-footer">
  <button type="button" class="btn" (click)="modal.dismiss()">
    Annuleren
  </button>
  <button type="button" class="btn" (click)="editTag(this.editedTag.value)">
    aanpassen
</button>
</div>
</ng-template>

<ng-template #contentDelete let-modal>
<div class="modal-header">
  <h4 class="modal-title" id="modal-tag-delete">Verwijderen</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
</div>
<div class="modal-body">
  <span>Weet u zeker dat u de tag {{deleteTagName}} wilt verwijderen?</span>
</div>
<div class="modal-footer">
  <button type="button" class="btn" (click)="modal.dismiss()">
    Annuleren
  </button>
  <button type="button" class="btn" (click)="deleteTag()">
    Bevestigen
</button>
</div>
</ng-template>